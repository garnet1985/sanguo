{"version":3,"sources":["conf/gameConf.js","services/event.js","services/request.js","services/api.js","entity/kingdom.js","entity/general.js","entity/city.js","entity/weapon.js","entity/armor.js","entity/weaponType.js","services/game.js","i18n/en.js","i18n/cn.js","i18n/index.js","cps/gameSelectBanner/index.js","cps/commandBox/index.js","scenes/gameSelect/index.js","scenes/roleSelect/index.js","scenes/mainMap/index.js","game/index.js","App.js","serviceWorker.js","index.js"],"names":["GAME_SELECT","ROLE_SELECT","MAIN_MAP","BATTLE_MAP","BATTLE","END","Events","pool","findEvent","eventName","i","this","length","name","uniqueCallback","event","callback","hasAdded","funcs","toString","push","removeEvent","splice","destory","call","off","unSubscribe","once","isOnce","listen","on","subscribe","trigger","data","forEach","cb","Request","ipcRenderer","window","require","prototype","send","eventType","Promise","resolve","reject","Error","e","JSON","parse","API","getKingdoms","req","getGenerals","getCities","getWeapons","getArmors","getWeaponTypes","Kingdom","initData","id","isCustomized","capital","reputation","build","cities","city","General","experience","level","getLevel","morality","hp","politics","command","intelligence","force","power","skill","overall","getOverallForce","loyalty","extent","caprice","bornYear","deadYear","title","heroType","weapon","armor","isLord","ambition","aggressive","weapons","armors","getMaxAllowedMilitary","maxMilitary","Math","round","exp","parseInt","City","morale","treasure","generals","leader","development","farmland","industry","infrastructure","military","militaryAmount","countMilitary","disasterPrevention","immigration","results","gen","getPopulation","factor","pow","population","Weapon","startPoint","category","weaponTypes","type","Armor","WeaponType","Game","realTimeData","kingdoms","init","getRawEntites","then","getEntityInstances","all","api","promises","kingdom","idx","general","weaponType","console","log","gameSelectScene","GAME_TITLE","GAME_VERSION","NEW_GAME","LOAD_SAVED","LANGUAGE_SWITCHER","CN","EN","DIFFICULT","EASY","NORMAL","HARD","BACK","SAVE_SLOT","currentLanguage","content","cn","set","lang","toLowerCase","en","get","GameSelectBanner","text","className","gameConf","Component","layout","props","args","commands","key","data-value","value","onClick","_clickCommand","bind","label","_getLayout","heading","GameSelect","state","commandBox","cmd","setState","arg","_getCommandBox","RoleSelect","MainMap","scene","game","_toScene","_init","newLang","newScene","_getScene","App","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","document","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","headers","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"iWAAe,EACL,IADK,EAEP,CACNA,YAAa,EACbC,YAAa,EACbC,SAAU,EACVC,WAAY,EACZC,OAAQ,EACRC,IAAK,GCwFQC,EAhGF,CACTC,KAAM,GACNC,UAAW,SAASC,GAClB,IAAK,IAAIC,EAAIC,KAAKJ,KAAKK,OAAS,EAAGF,GAAK,EAAGA,IACzC,GAAIC,KAAKJ,KAAKG,GAAGG,OAASJ,EACxB,OAAOE,KAAKJ,KAAKG,GAGrB,OAAO,GAETI,eAAgB,SAASC,EAAOC,GAI9B,IAFA,IAAIC,GAAW,EAENP,EAAI,EAAGA,EAAIK,EAAMG,MAAMN,OAAQF,IACtC,GAAIM,EAASG,aAAeJ,EAAMG,MAAMR,GAAGS,WAAY,CACrDJ,EAAMG,MAAMR,GAAKM,EACjBC,GAAW,EACX,MAICA,GACHF,EAAMG,MAAME,KAAKJ,IAIrBK,YAAa,SAASZ,GACpB,IAAK,IAAIC,EAAIC,KAAKJ,KAAKK,OAAS,EAAGF,GAAK,EAAGA,IACzC,GAAIC,KAAKJ,KAAKG,GAAGG,OAASJ,EAAW,CACnCE,KAAKJ,KAAKe,OAAOZ,EAAG,GACpB,QAINa,QAAS,SAASd,GAChBE,KAAKU,YAAYG,KAAKb,KAAMF,IAE9BgB,IAAK,SAAShB,GACZE,KAAKU,YAAYG,KAAKb,KAAMF,IAE9BiB,YAAa,SAASjB,GACpBE,KAAKU,YAAYG,KAAKb,KAAMF,IAE9BkB,KAAM,SAASlB,EAAWO,GACxB,IAAID,EAAQJ,KAAKH,UAAUC,GACvBM,EACEC,GACFD,EAAMG,MAAME,KAAKJ,IAGnBD,EAAQ,CACNF,KAAMJ,EACNS,MAAO,CAACF,GACRY,QAAQ,GAEVjB,KAAKJ,KAAKa,KAAKL,KAGnBc,OAAQ,SAASpB,EAAWO,GAE1B,IAAID,EAAQJ,KAAKH,UAAUC,GAEvBM,EACFJ,KAAKG,eAAeC,EAAOC,IAE3BD,EAAQ,CACNF,KAAMJ,EACNS,MAAO,CAACF,GACRY,QAAQ,GAEVjB,KAAKJ,KAAKa,KAAKL,KAInBe,GAAI,SAASrB,EAAWO,GACtBL,KAAKkB,OAAOL,KAAKb,KAAMF,EAAWO,IAEpCe,UAAW,SAAStB,EAAWO,GAC7BL,KAAKkB,OAAOL,KAAKb,KAAMF,EAAWO,IAEpCgB,QAAS,SAASvB,EAAWwB,GAE3B,IAAIlB,EAAQJ,KAAKH,UAAUC,GAEvBM,IACFA,EAAMG,MAAMgB,SAAQ,SAASC,GAC3BA,EAAGF,MAEDlB,EAAMa,QACRjB,KAAKU,YAAYZ,MC1F3B,SAAS2B,IACRzB,KAAK0B,YAAcC,OAAOC,QAAQ,YAAYF,YAG/CD,EAAQI,UAAUC,KAAO,SAASC,EAAWjC,EAAWwB,GAAM,IAAD,OAsB5D,OApBc,IAAIU,SAAQ,SAACC,EAASC,GACnC,OAAQH,GACP,IAAK,OACJ,EAAKL,YAAYI,KAAjB,UAAyBC,EAAzB,YAAsCjC,GAAawB,GACnD,MACD,IAAK,OACJ,EAAKI,YAAYI,KAAjB,UAAyBC,EAAzB,YAAsCjC,IACtC,MACD,QACC,MAAM,IAAIqC,MAAJ,kCAAqCJ,IAG7C,EAAKL,YAAYV,KAAjB,UAAyBe,EAAzB,YAAsCjC,EAAtC,cAA4D,SAACsC,EAAGd,GAC5C,kBAATA,IACTA,EAAOe,KAAKC,MAAMhB,IAEnBW,EAAQX,UAOI,UAAIG,EC3BnB,SAASc,KAITA,EAAIV,UAAUW,YAAc,WAC3B,OAAOC,EAAIX,KAAK,OAAO,aAGxBS,EAAIV,UAAUa,YAAc,WAC3B,OAAOD,EAAIX,KAAK,OAAO,aAGxBS,EAAIV,UAAUc,UAAY,WACzB,OAAOF,EAAIX,KAAK,OAAO,WAGxBS,EAAIV,UAAUe,WAAa,WAC1B,OAAOH,EAAIX,KAAK,OAAO,YAGxBS,EAAIV,UAAUgB,UAAY,WACzB,OAAOJ,EAAIX,KAAK,OAAO,WAGxBS,EAAIV,UAAUiB,eAAiB,WAC9B,OAAOL,EAAIX,KAAK,OAAO,gBAIT,UAAIS,EC/BnB,SAASQ,EAAQC,GAChBhD,KAAKiD,GAAWD,EAASC,GACzBjD,KAAKE,KAAY8C,EAAS9C,KAC1BF,KAAKkD,aAAgBF,EAASE,aAC9BlD,KAAKmD,QAAaH,EAASG,QAC3BnD,KAAKoD,WAAeJ,EAASI,WAG9BL,EAAQlB,UAAUwB,MAAQ,WAAsB,IAAD,OAAZC,EAAY,uDAAH,GAC3CA,EAAO/B,SAAQ,SAACgC,GACZA,EAAKN,KAAO,EAAKE,UACnB,EAAKA,QAAUI,OAMHR,QCjBf,SAASS,EAAQR,GAChBhD,KAAKiD,GAAUD,EAASC,GACxBjD,KAAKE,KAAW8C,EAAS9C,KACzBF,KAAKyD,WAAcT,EAASS,WAC5BzD,KAAK0D,MAAW1D,KAAK2D,SAASX,EAASS,YAEvCzD,KAAK4D,SAAaZ,EAASY,SAE3B5D,KAAK6D,GAAUb,EAASa,GAExB7D,KAAK8D,SAAad,EAASc,SAE3B9D,KAAK+D,QAAaf,EAASe,QAE3B/D,KAAKgE,aAAehB,EAASgB,aAE7BhE,KAAKiE,MAAQ,CACZC,MAAOlB,EAASkB,MAChBC,MAAOnB,EAASmB,MAChBC,QAASpE,KAAKqE,gBAAgBrB,EAASkB,MAAOlB,EAASmB,QAGxDnE,KAAKsE,QAAU,CACdC,OAAQvB,EAASuB,OACjBC,QAASxB,EAASwB,SAEnBxE,KAAKyE,SAAazB,EAASyB,SAC3BzE,KAAK0E,SAAa1B,EAAS0B,SAC3B1E,KAAK2E,MAAY3B,EAAS2B,MAC1B3E,KAAK4E,SAAa5B,EAAS4B,SAC3B5E,KAAK6E,OAAY7B,EAAS6B,OAC1B7E,KAAK8E,MAAW9B,EAAS8B,MACzB9E,KAAKkD,aAAeF,EAASE,aAC7BlD,KAAK+E,OAAY/B,EAAS+B,OAC1B/E,KAAKgF,SAAahC,EAASgC,SAC3BhF,KAAKiF,WAAcjC,EAASiC,WAG7BzB,EAAQ3B,UAAUwB,MAAQ,SAAS6B,EAASC,GAAQ,IAAD,OAClDD,EAAQ3D,SAAQ,SAACsD,GACbA,EAAO5B,KAAO,EAAK4B,SACrB,EAAKA,OAASA,MAIhBM,EAAO5D,SAAQ,SAACuD,GACZA,EAAM7B,KAAO,EAAK6B,QACpB,EAAKA,MAAQA,MAIf9E,KAAKoF,yBAGN5B,EAAQ3B,UAAUuD,sBAAwB,WACzCpF,KAAKqF,YAAkD,IAApCC,KAAKC,MAAMvF,KAAK+D,QAAU,GAAK,IAGnDP,EAAQ3B,UAAUwC,gBAAkB,SAASH,EAAOC,GACnD,OAAOmB,KAAKC,MAAc,IAARrB,EAAsB,IAARC,IAGjCX,EAAQ3B,UAAU8B,SAAW,SAAS6B,GACrC,OAAOC,SAASD,EAAM,KAAO,GAGfhC,QClEf,SAASkC,EAAK1C,GACbhD,KAAKiD,GAAWD,EAASC,GACzBjD,KAAKE,KAAY8C,EAAS9C,KAC1BF,KAAK2F,OAAa3C,EAAS2C,OAC3B3F,KAAK4F,SAAc5C,EAAS4C,SAC5B5F,KAAK6F,SAAc7C,EAAS6C,SAC5B7F,KAAK8F,OAAa9C,EAAS8C,OAC3B9F,KAAK+F,YAAgB,CACpBC,SAAUhD,EAASgD,SACnBC,SAAUjD,EAASiD,SACnBC,eAAgBlD,EAASkD,gBAE1BlG,KAAKmG,SAAcnD,EAASmD,SAC5BnG,KAAKoG,eAAiBpG,KAAKqG,gBAC3BrG,KAAKsG,mBAAqBtD,EAASsD,mBACnCtG,KAAKuG,YAAc,EAGpBb,EAAK7D,UAAUwB,MAAQ,WAAwB,IAAD,OAAdwC,EAAc,uDAAH,GACtCW,EAAU,GACXxG,KAAK6F,SAAS5F,SAChB4F,EAAStE,SAAQ,SAACkF,GACjB,EAAKZ,SAAStE,SAAQ,SAAC0B,GACnBwD,EAAIxD,KAAOA,GACbuD,EAAQ/F,KAAKgG,MAGZ,EAAKX,SAAWW,EAAIxD,KACtB,EAAK6C,OAASW,MAGhBzG,KAAK6F,SAAWW,GAEjBxG,KAAK0G,iBAGNhB,EAAK7D,UAAU6E,cAAgB,WAC9B,IAAIC,EAE4C,GAFnCrB,KAAKsB,IAAgC,GAA5B5G,KAAK+F,YAAYC,SACR,GAA5BhG,KAAK+F,YAAYE,SACiB,GAAlCjG,KAAK+F,YAAYG,eAAqB,KACzClG,KAAK6G,WAAuD,KAAzCvB,KAAKC,MAAMoB,GAAU3G,KAAKuG,cAG9Cb,EAAK7D,UAAUwE,cAAgB,WAC9B,OAAO,KAIOX,QChDf,SAASoB,EAAO9D,GACfhD,KAAKiD,GAAKD,EAASC,GACnBjD,KAAKE,KAAO8C,EAAS9C,KACrBF,KAAK+G,WAAa/D,EAAS+D,WAC3B/G,KAAKkE,MAAQlB,EAASkB,MACtBlE,KAAKgH,SAAWhE,EAASgE,SAG1BF,EAAOjF,UAAUwB,MAAQ,SAAS4D,GAAa,IAAD,OAC7CA,EAAY1F,SAAQ,SAAC2F,GACjBA,EAAKjE,KAAO,EAAK+D,WACnB,EAAKA,SAAWE,OAKJJ,QCTAK,MAPf,SAAenE,GACdhD,KAAKiD,GAAKD,EAASC,GACnBjD,KAAKE,KAAO8C,EAAS9C,KACrBF,KAAK+G,WAAa/D,EAAS+D,WAC3B/G,KAAKkE,MAAQlB,EAASkB,OCCRkD,MALf,SAAoBpE,GACnBhD,KAAKiD,GAAKD,EAASC,GACnBjD,KAAKE,KAAO8C,EAAS9C,MCOtB,SAASmH,IAERrH,KAAKsB,KAAO,KACZtB,KAAKsH,aAAe,KAEpBtH,KAAKuH,SAAW,KAChBvH,KAAK6F,SAAW,KAChB7F,KAAKsD,OAAS,KACdtD,KAAKkF,QAAU,KACflF,KAAKmF,OAAS,KAGfkC,EAAKxF,UAAU2F,KAAO,WAAW,IAAD,OAC/BxH,KAAKyH,gBACJC,MAAK,WACL,EAAKC,qBACL,EAAKtE,YAIPgE,EAAKxF,UAAU4F,cAAgB,WAAW,IAAD,OACxC,OAAOzF,QAAQ4F,IAAI,CAClBC,EAAIrF,cACJqF,EAAInF,cACJmF,EAAIlF,YACJkF,EAAIjF,aACJiF,EAAIhF,YACJgF,EAAI/E,mBACF4E,MAAK,SAACI,GACR,EAAKP,SAAWO,EAAS,GACzB,EAAKjC,SAAWiC,EAAS,GACzB,EAAKxE,OAASwE,EAAS,GACvB,EAAK5C,QAAU4C,EAAS,GACxB,EAAK3C,OAAS2C,EAAS,GACvB,EAAKb,YAAca,EAAS,OAI9BT,EAAKxF,UAAU8F,mBAAqB,WAAW,IAAD,OAE7C3H,KAAKuH,SAAShG,SAAQ,SAACwG,EAASC,GAC/B,EAAKT,SAASS,GAAO,IAAIjF,EAAQgF,MAGlC/H,KAAK6F,SAAStE,SAAQ,SAAC0G,EAASD,GAC/B,EAAKnC,SAASmC,GAAO,IAAIxE,EAAQyE,MAGlCjI,KAAKsD,OAAO/B,SAAQ,SAACgC,EAAMyE,GAC1B,EAAK1E,OAAO0E,GAAO,IAAItC,EAAKnC,MAG7BvD,KAAKkF,QAAQ3D,SAAQ,SAACsD,EAAQmD,GAC7B,EAAK9C,QAAQ8C,GAAO,IAAIlB,EAAOjC,MAGhC7E,KAAKiH,YAAY1F,SAAQ,SAAC2G,EAAYF,GACrC,EAAKf,YAAYe,GAAO,IAAIZ,EAAWc,MAGxClI,KAAKmF,OAAO5D,SAAQ,SAACuD,EAAOkD,GAC3B,EAAK7C,OAAO6C,GAAO,IAAIb,EAAMrC,OAI/BuC,EAAKxF,UAAUwB,MAAQ,WAAW,IAAD,OAEhCrD,KAAKkF,QAAQ3D,SAAQ,SAACsD,GACrBA,EAAOxB,MAAM,EAAK4D,gBAGnBjH,KAAK6F,SAAStE,SAAQ,SAAC0G,GACtBA,EAAQ5E,MAAM,EAAK6B,QAAS,EAAKC,WAGlCnF,KAAKsD,OAAO/B,SAAQ,SAACgC,GACpBA,EAAKF,MAAM,EAAKwC,aAGjB7F,KAAKuH,SAAShG,SAAQ,SAACwG,GACtBA,EAAQ1E,MAAM,EAAKC,WAGpB6E,QAAQC,IAAIpI,KAAKuH,WAMH,UAAIF,EClGJ,G,MAAA,CACdgB,gBAAiB,CAChBC,WAAY,iBACZC,aAAc,UACdC,SAAU,WACVC,WAAY,YACZC,kBAAmB,WACnBC,GAAI,UACJC,GAAI,UACJC,UAAW,aACXC,KAAM,OACNC,OAAQ,SACRC,KAAM,OACNC,KAAM,OACNC,UAAW,eCdE,GACdb,gBAAiB,CAChBC,WAAY,qBACZC,aAAc,eACdC,SAAU,qBACVC,WAAY,2BACZC,kBAAmB,2BACnBC,GAAI,eACJC,GAAI,eACJC,UAAW,eACXC,KAAM,eACNC,OAAQ,eACRC,KAAM,eACNC,KAAM,eACNC,UAAW,iBCXE,GACdC,gBAAiB,KACjBC,QAASC,EACTC,IAAK,SAASC,GACb,OAAQA,EAAKC,eACZ,IAAK,KACJxJ,KAAKmJ,gBAAkB,KACvBnJ,KAAKoJ,QAAUK,EACf,MACD,IAAK,KACJzJ,KAAKmJ,gBAAkB,KACvBnJ,KAAKoJ,QAAUC,EACf,MACD,QACC,MAAM,IAAIlH,MAAM,kDAGnBuH,IAAK,WACJ,OAAO1J,KAAKmJ,kBCHCQ,G,uLAVb,IAAIC,EAAOL,EAAKH,QAAQf,gBACtB,OACE,yBAAKwB,UAAU,4BACZ,wBAAIA,UAAU,gBAAiBD,EAAKtB,YACpC,0BAAMuB,UAAU,gBAAiBD,EAAKrB,aAAtC,IAAuDuB,Q,GANjCC,cC2DhBJ,G,2LAlCD,IAAD,OACPK,EAAS,GASb,OARAhK,KAAKiK,MAAMC,KAAKC,SAAS5I,SAAQ,SAACwC,EAASiE,GAC1CgC,EAAOvJ,KAAK,wBAAI2J,IAAMpC,EAAM6B,UAAU,WACrC,4BAAQQ,aAAatG,EAAQuG,MAAQT,UAAS,sBAAiB9F,EAAQuG,OACtEC,QAAU,EAAKC,cAAcC,KAAK,EAAM1G,IACtCA,EAAQ2G,YAINV,I,oCAGMjG,GACb3D,EAAMiB,QAAN,UAAiBrB,KAAKiK,MAAMC,KAAKpK,UAAjC,UAAoDiE,GACpD3D,EAAMiB,QAAN,UAAiBrB,KAAKiK,MAAMC,KAAKpK,UAAjC,YAA8CiE,EAAQuG,MAAtD,UAAqEvG,K,+BAKrE,IAAIiG,EAAShK,KAAK2K,aACdC,EAAU5K,KAAKiK,MAAMC,KAAKU,QAC7B,wBAAIf,UAAU,WAAW7J,KAAKiK,MAAMC,KAAKU,SAAgB,GACxD,OACE,yBAAKf,UAAS,4BAAuB7J,KAAKiK,MAAMC,KAAKpK,YAClD8K,EACF,4BACKZ,Q,GAjCmBD,cC2JhBc,E,YAxKb,WAAYZ,GAAO,IAAD,8BAChB,4CAAMA,KACDa,MAAQ,CACXC,WAAY,QAHE,E,8EAQhB,IAAInB,EAAOL,EAAKH,QAAQf,gBACxB,OAAQrI,KAAK8K,MAAMC,YACjB,IAAK,OACH,MAAO,CACLjL,UAAW,aACXqK,SAAU,CACR,CACEO,MAAOd,EAAKpB,SACZ8B,MAAO,WAET,CACEI,MAAOd,EAAKnB,WACZ6B,MAAO,YAET,CACEI,MAAOd,EAAKlB,kBACZ4B,MAAO,sBAIf,IAAK,UACH,MAAO,CACLxK,UAAW,UACXqK,SAAU,CACR,CACEO,MAAOd,EAAKd,KACZwB,MAAO,UAET,CACEI,MAAOd,EAAKb,OACZuB,MAAO,UAET,CACEI,MAAOd,EAAKZ,KACZsB,MAAO,UAET,CACEI,MAAOd,EAAKX,KACZqB,MAAO,UAIf,IAAK,WACH,MAAO,CACLxK,UAAW,WACXqK,SAAU,CACR,CACEO,MAAM,GAAD,OAAKd,EAAKV,UAAV,MACLoB,MAAO,SAET,CACEI,MAAM,GAAD,OAAKd,EAAKV,UAAV,MACLoB,MAAO,SAET,CACEI,MAAM,GAAD,OAAKd,EAAKV,UAAV,MACLoB,MAAO,SAET,CACEI,MAAM,GAAD,OAAKd,EAAKV,UAAV,MACLoB,MAAO,SAET,CACEI,MAAM,GAAD,OAAKd,EAAKV,UAAV,MACLoB,MAAO,SAET,CACEI,MAAM,GAAD,OAAKd,EAAKV,UAAV,MACLoB,MAAO,SAET,CACEI,MAAM,GAAD,OAAKd,EAAKV,UAAV,MACLoB,MAAO,SAET,CACEI,MAAM,GAAD,OAAKd,EAAKV,UAAV,MACLoB,MAAO,WAId,IAAK,mBACJ,MAAO,CACLxK,UAAW,mBACXqK,SAAU,CACR,CACEO,MAAM,GAAD,OAAKd,EAAKjB,IACf2B,MAAO,MAET,CACEI,MAAM,GAAD,OAAKd,EAAKhB,IACf0B,MAAO,QAIf,QACE,U,0CAIc,IAAD,OAEjBlK,EAAMe,GAAG,4BAA4B,SAAC6J,GACpC,EAAKC,SAAS,CACZF,WAAY,eAIhB3K,EAAMe,GAAG,6BAA6B,SAAC6J,GACrC,EAAKC,SAAS,CACZF,WAAY,gBAIhB3K,EAAMe,GAAG,qCAAqC,SAAC6J,GAC7C,EAAKC,SAAS,CACZF,WAAY,wBAIhB3K,EAAMe,GAAG,iBAAiB,SAAC6J,GAEzB5K,EAAMiB,QAAQ,eAAgByI,EAAexK,aAE7C,EAAK2L,SAAS,CACZF,WAAY,YAIhB3K,EAAMe,GAAG,kBAAkB,SAAC6J,GAC1B,EAAKC,SAAS,CACZF,WAAY,YAIhB3K,EAAMe,GAAG,0BAA0B,SAAC6J,GAC/BA,EAAIV,QAAUf,EAAKG,QACpBH,EAAKD,IAAI0B,EAAIV,OACblK,EAAMiB,QAAQ,cAAe2J,EAAIV,QAEnC,EAAKW,SAAS,CACZF,WAAY,c,+BAMhB,IAAIG,EAAMlL,KAAKmL,iBACf,OACE,yBAAKtB,UAAU,qBACb,kBAAC,EAAD,MACA,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CAAYK,KAASgB,W,GAlKRnB,aCeVqB,G,wNARX,OACE,yBAAKvB,UAAU,0B,GAZIE,cCgBVsB,E,iLARX,OACE,yBAAKxB,UAAU,kBAAf,iB,GAXgBE,aC2FP1C,E,YAjFb,WAAY4C,GAAO,IAAD,8BAChB,4CAAMA,KACDa,MAAQ,CACXQ,MAAO,EACP/B,KAAM,MAJQ,E,uEAQR+B,GAET,IAAItB,EAAS,KAEb,OAAQhK,KAAK8K,MAAMQ,OAClB,KAAKxB,EAAezK,YACnB2K,EAAS,kBAAC,EAAD,MACT,MACC,KAAKF,EAAexK,YAClB0K,EAAS,kBAAC,EAAD,MACT,MACJ,KAAKF,EAAevK,SACnByK,EAAS,kBAAC,EAAD,MACT,MACD,KAAKF,EAAetK,WACnBwK,EAAS,yBAAK/G,GAAG,oBAAR,sBACT,MACD,KAAK6G,EAAerK,OACnBuK,EAAS,yBAAK/G,GAAG,gBAAR,kBACT,MACD,KAAK6G,EAAepK,IACnBsK,EAAS,yBAAK/G,GAAG,aAAR,mBAMX,OAAO+G,I,8BAINuB,EAAK/D,OAGLxH,KAAKwL,SAAS1B,EAAexK,e,+BAGtB2D,GACPjD,KAAKiL,SAAS,CACZK,MAAO7F,SAASxC,O,0CAIA,IAAD,OAEjBjD,KAAKyL,QAELrL,EAAMe,GAAG,eAAe,SAACuK,GACvB,EAAKT,SAAS,CACZ1B,KAAMmC,OAIVtL,EAAMe,GAAG,gBAAgB,SAACwK,GACxB,EAAKV,SAAS,CACZK,MAAOK,S,+BAMX,IAAI3L,KAAK8K,MAAMQ,MACb,OAAO,yBAAKrI,GAAG,WAAR,cAEV,IAAIqI,EAAQtL,KAAK4L,UAAU5L,KAAK8K,MAAMQ,OACrC,OACE,yBAAKrI,GAAG,eAAe4G,UAAY7J,KAAK8K,MAAMvB,MAC3C+B,O,GA7EUvB,aCAJ8B,MARf,WACE,OACE,yBAAK5I,GAAG,QACN,kBAAC,EAAD,QCKA6I,EAAcC,QACW,cAA7BpK,OAAOqK,SAASC,UAEe,UAA7BtK,OAAOqK,SAASC,UAEhBtK,OAAOqK,SAASC,SAASC,MACvB,2DAsCN,SAASC,EAAgBC,EAAOC,GAC9BC,UAAUC,cACPC,SAASJ,GACT1E,MAAK,SAAA+E,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB7B,QACfwB,UAAUC,cAAcO,YAI1B3E,QAAQC,IACN,iHAKEiE,GAAUA,EAAOU,UACnBV,EAAOU,SAASN,KAMlBtE,QAAQC,IAAI,sCAGRiE,GAAUA,EAAOW,WACnBX,EAAOW,UAAUP,WAO5BQ,OAAM,SAAAC,GACL/E,QAAQ+E,MAAM,4CAA6CA,MC1FjEC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,SDgB1C,SAAkBjB,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAIiB,IAAIC,IAAwB7L,OAAOqK,SAASyB,MACpDC,SAAW/L,OAAOqK,SAAS0B,OAIvC,OAGF/L,OAAOgM,iBAAiB,QAAQ,WAC9B,IAAMvB,EAAK,UAAMoB,IAAN,sBAEP1B,IAgEV,SAAiCM,EAAOC,GAEtCuB,MAAMxB,GACH1E,MAAK,SAAAmG,GAEJ,IAAMC,EAAcD,EAASE,QAAQrE,IAAI,gBAEnB,MAApBmE,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAYG,QAAQ,cAG5C3B,UAAUC,cAAc2B,MAAMxG,MAAK,SAAA+E,GACjCA,EAAa0B,aAAazG,MAAK,WAC7B/F,OAAOqK,SAASoC,eAKpBjC,EAAgBC,EAAOC,MAG1BY,OAAM,WACL9E,QAAQC,IACN,oEArFAiG,CAAwBjC,EAAOC,GAI/BC,UAAUC,cAAc2B,MAAMxG,MAAK,WACjCS,QAAQC,IACN,iHAMJ+D,EAAgBC,EAAOC,OCvC/BE,K","file":"static/js/main.390e8ab3.chunk.js","sourcesContent":["export default {\n\tversion: 0.01,\n\tscene: {\n\t\tGAME_SELECT: 1,\n\t\tROLE_SELECT: 2,\n\t\tMAIN_MAP: 3,\n\t\tBATTLE_MAP: 4,\n\t\tBATTLE: 5,\n\t\tEND: 6\n\t}\n}","var Events = {\n    pool: [],\n    findEvent: function(eventName) {\n      for (var i = this.pool.length - 1; i >= 0; i--) {\n        if (this.pool[i].name === eventName) {\n          return this.pool[i];\n        }\n      }\n      return false;\n    },\n    uniqueCallback: function(event, callback) {\n\n      var hasAdded = false;\n\n      for (var i = 0; i < event.funcs.length; i++) {\n        if (callback.toString() === event.funcs[i].toString()) {\n          event.funcs[i] = callback;\n          hasAdded = true;\n          break;\n        }\n      }\n\n      if (!hasAdded) {\n        event.funcs.push(callback);\n      }\n\n    },\n    removeEvent: function(eventName) {\n      for (var i = this.pool.length - 1; i >= 0; i--) {\n        if (this.pool[i].name === eventName) {\n          this.pool.splice(i, 1);\n          break;\n        }\n      }\n    },\n    destory: function(eventName) {\n      this.removeEvent.call(this, eventName);\n    },\n    off: function(eventName) {\n      this.removeEvent.call(this, eventName);\n    },\n    unSubscribe: function(eventName) {\n      this.removeEvent.call(this, eventName);\n    },\n    once: function(eventName, callback) {\n      var event = this.findEvent(eventName);\n      if (event) {\n        if (callback) {\n          event.funcs.push(callback);\n        }\n      } else {\n        event = {\n          name: eventName,\n          funcs: [callback],\n          isOnce: true\n        }\n        this.pool.push(event);\n      }\n    },\n    listen: function(eventName, callback) {\n\n      var event = this.findEvent(eventName);\n\n      if (event) {\n        this.uniqueCallback(event, callback);\n      } else {\n        event = {\n          name: eventName,\n          funcs: [callback],\n          isOnce: false\n        }\n        this.pool.push(event);\n      }\n\n    },\n    on: function(eventName, callback) {\n      this.listen.call(this, eventName, callback);\n    },\n    subscribe: function(eventName, callback) {\n      this.listen.call(this, eventName, callback);\n    },\n    trigger: function(eventName, data) {\n\n      var event = this.findEvent(eventName);\n\n      if (event) {\n        event.funcs.forEach(function(cb) {\n          cb(data);\n        });\n        if (event.isOnce) {\n          this.removeEvent(eventName)\n        }\n      }\n    }\n}\n\nexport default Events;","function Request(){\n\tthis.ipcRenderer = window.require('electron').ipcRenderer;\n}\n\nRequest.prototype.send = function(eventType, eventName, data){\n\t\n\tlet promise = new Promise((resolve, reject) => {\n\t\tswitch (eventType) {\n\t\t\tcase 'save':\n\t\t\t\tthis.ipcRenderer.send(`${eventType}.${eventName}`, data);\n\t\t\t\tbreak;\n\t\t\tcase 'load':\n\t\t\t\tthis.ipcRenderer.send(`${eventType}.${eventName}`);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(`unrecognized event type ${eventType}`);\n\t\t}\n\n\t\tthis.ipcRenderer.once(`${eventType}.${eventName}.complete`, (e, data) => {\n\t\t\tif(typeof data === 'string'){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\tresolve(data);\n\t\t});\n\t});\n\n\treturn promise;\n}\n\nexport default new Request();","import req from './request';\n\nfunction API(){\n\t\n}\n\nAPI.prototype.getKingdoms = function(){\n\treturn req.send('load','kingdoms');\n}\n\nAPI.prototype.getGenerals = function(){\n\treturn req.send('load','generals');\n}\n\nAPI.prototype.getCities = function(){\n\treturn req.send('load','cities');\n}\n\nAPI.prototype.getWeapons = function(){\n\treturn req.send('load','weapons');\n}\n\nAPI.prototype.getArmors = function(){\n\treturn req.send('load','armors');\n}\n\nAPI.prototype.getWeaponTypes = function(){\n\treturn req.send('load','weaponTypes');\n}\n\n\nexport default new API();","function Kingdom(initData){\n\tthis.id \t\t\t\t\t\t= initData.id;\n\tthis.name\t\t\t\t\t\t= initData.name;\n\tthis.isCustomized\t\t= initData.isCustomized;\n\tthis.capital\t\t\t\t= initData.capital;\n\tthis.reputation\t\t\t= initData.reputation;\n}\n\nKingdom.prototype.build = function(cities = []){\n\tcities.forEach((city) => {\n\t\tif(city.id === this.capital){\n\t\t\tthis.capital = city;\n\t\t\treturn;\n\t\t}\n\t})\n}\n\nexport default Kingdom;","function General(initData){\n\tthis.id \t\t\t\t\t= initData.id;\n\tthis.name \t\t\t\t= initData.name;\n\tthis.experience \t= initData.experience;\n\tthis.level\t\t\t\t= this.getLevel(initData.experience);\n\t// 德\n\tthis.morality \t\t= initData.morality;\n\t// 体\n\tthis.hp \t\t\t\t\t= initData.hp;\n\t// 政\n\tthis.politics \t\t= initData.politics;\n\t// 统\n\tthis.command \t\t\t= initData.command;\n\t// 智\n\tthis.intelligence = initData.intelligence;\n\t// 武\n\tthis.force = {\n\t\tpower: initData.power,\n\t\tskill: initData.skill,\n\t\toverall: this.getOverallForce(initData.power, initData.skill)\n\t}\n\t// 忠\n\tthis.loyalty = {\n\t\textent: initData.extent,\n\t\tcaprice: initData.caprice\n\t}\n\tthis.bornYear \t\t= initData.bornYear;\n\tthis.deadYear \t\t= initData.deadYear;\n\tthis.title \t\t\t\t= initData.title;\n\tthis.heroType\t\t\t= initData.heroType;\n\tthis.weapon\t\t\t\t= initData.weapon;\n\tthis.armor\t\t\t\t= initData.armor;\n\tthis.isCustomized = initData.isCustomized;\n\tthis.isLord \t\t\t= initData.isLord;\n\tthis.ambition \t\t= initData.ambition;\n\tthis.aggressive \t= initData.aggressive;\n}\n\nGeneral.prototype.build = function(weapons, armors){\n\tweapons.forEach((weapon) => {\n\t\tif(weapon.id === this.weapon){\n\t\t\tthis.weapon = weapon;\n\t\t\treturn;\n\t\t}\n\t});\n\tarmors.forEach((armor) => {\n\t\tif(armor.id === this.armor){\n\t\t\tthis.armor = armor;\n\t\t\treturn;\n\t\t}\n\t});\n\tthis.getMaxAllowedMilitary();\n}\n\nGeneral.prototype.getMaxAllowedMilitary = function(){\n\tthis.maxMilitary = Math.round(this.command / 10 + 1) * 1000;\n}\n\nGeneral.prototype.getOverallForce = function(power, skill){\n\treturn Math.round(power * .43 + skill * .57);\n}\n\nGeneral.prototype.getLevel = function(exp){\n\treturn parseInt(exp / 100) + 1;\n}\n\nexport default General;","function City(initData){\n\tthis.id \t\t\t\t\t\t= initData.id;\n\tthis.name \t\t\t\t\t= initData.name;\n\tthis.morale \t\t\t\t= initData.morale;\n\tthis.treasure \t\t\t= initData.treasure;\n\tthis.generals \t\t\t= initData.generals;\n\tthis.leader \t\t\t\t= initData.leader;\n\tthis.development \t\t= {\n\t\tfarmland: initData.farmland,\n\t\tindustry: initData.industry,\n\t\tinfrastructure: initData.infrastructure\n\t};\n\tthis.military \t\t\t= initData.military;\n\tthis.militaryAmount = this.countMilitary();\n\tthis.disasterPrevention = initData.disasterPrevention;\n\tthis.immigration = 0;\n}\n\nCity.prototype.build = function(generals = []){\n\tlet results = [];\n\tif(this.generals.length){\n\t\tgenerals.forEach((gen) => {\n\t\t\tthis.generals.forEach((id) => {\n\t\t\t\tif(gen.id === id) {\n\t\t\t\t\tresults.push(gen);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(this.leader === gen.id){\n\t\t\t\tthis.leader = gen;\n\t\t\t}\n\t\t});\n\t\tthis.generals = results;\n\t}\n\tthis.getPopulation();\n}\n\nCity.prototype.getPopulation = function(){\n\tlet factor = Math.pow(this.development.farmland * .4 \n\t\t+ this.development.industry * .1 \n\t\t+ this.development.infrastructure * .5, .57) * 10;\n\tthis.population = (Math.round(factor) + this.immigration) * 1000;\n}\n\nCity.prototype.countMilitary = function(){\n\treturn 10000;\n}\n\n\nexport default City;","function Weapon(initData){\n\tthis.id = initData.id;\n\tthis.name = initData.name;\n\tthis.startPoint = initData.startPoint;\n\tthis.power = initData.power;\n\tthis.category = initData.category;\n}\n\nWeapon.prototype.build = function(weaponTypes){\n\tweaponTypes.forEach((type) => {\n\t\tif(type.id === this.category){\n\t\t\tthis.category = type;\n\t\t}\n\t})\n}\n\nexport default Weapon;","function Armor(initData){\n\tthis.id = initData.id;\n\tthis.name = initData.name;\n\tthis.startPoint = initData.startPoint;\n\tthis.power = initData.power;\n}\n\nexport default Armor;","function WeaponType(initData){\n\tthis.id = initData.id;\n\tthis.name = initData.name;\n}\n\nexport default WeaponType;","import api from './api';\n\nimport Kingdom from '../entity/kingdom';\nimport General from '../entity/general';\nimport City from '../entity/city';\nimport Weapon from '../entity/weapon';\nimport Armor from '../entity/armor';\nimport WeaponType from '../entity/weaponType';\n\nfunction Game(){\n\t\n\tthis.data = null;\n\tthis.realTimeData = null;\n\n\tthis.kingdoms = null;\n\tthis.generals = null;\n\tthis.cities = null;\n\tthis.weapons = null;\n\tthis.armors = null;\n}\n\nGame.prototype.init = function(){\n\tthis.getRawEntites()\n\t.then(() => {\n\t\tthis.getEntityInstances();\n\t\tthis.build();\n\t});\n}\n\nGame.prototype.getRawEntites = function(){\n\treturn Promise.all([\n\t\tapi.getKingdoms(),\n\t\tapi.getGenerals(),\n\t\tapi.getCities(),\n\t\tapi.getWeapons(),\n\t\tapi.getArmors(),\n\t\tapi.getWeaponTypes()\n\t]).then((promises) => {\n\t\tthis.kingdoms = promises[0];\n\t\tthis.generals = promises[1];\n\t\tthis.cities = promises[2];\n\t\tthis.weapons = promises[3];\n\t\tthis.armors = promises[4];\n\t\tthis.weaponTypes = promises[5];\n\t})\n}\n\nGame.prototype.getEntityInstances = function(){\n\n\tthis.kingdoms.forEach((kingdom, idx) => {\n\t\tthis.kingdoms[idx] = new Kingdom(kingdom);\n\t});\n\n\tthis.generals.forEach((general, idx) => {\n\t\tthis.generals[idx] = new General(general);\n\t});\n\n\tthis.cities.forEach((city, idx) => {\n\t\tthis.cities[idx] = new City(city);\n\t});\n\n\tthis.weapons.forEach((weapon, idx) => {\n\t\tthis.weapons[idx] = new Weapon(weapon);\n\t});\n\n\tthis.weaponTypes.forEach((weaponType, idx) => {\n\t\tthis.weaponTypes[idx] = new WeaponType(weaponType);\n\t});\n\n\tthis.armors.forEach((armor, idx) => {\n\t\tthis.armors[idx] = new Armor(armor);\n\t});\n}\n\nGame.prototype.build = function(){\n\n\tthis.weapons.forEach((weapon) => {\n\t\tweapon.build(this.weaponTypes);\n\t});\n\n\tthis.generals.forEach((general) => {\n\t\tgeneral.build(this.weapons, this.armors);\n\t});\n\n\tthis.cities.forEach((city) => {\n\t\tcity.build(this.generals);\n\t});\n\n\tthis.kingdoms.forEach((kingdom) => {\n\t\tkingdom.build(this.cities);\n\t});\n\n\tconsole.log(this.kingdoms);\n}\n\n\n\n\nexport default new Game();","export default {\n\tgameSelectScene: {\n\t\tGAME_TITLE: 'Three Kingdoms',\n\t\tGAME_VERSION: 'version',\n\t\tNEW_GAME: 'New Game',\n\t\tLOAD_SAVED: 'Load Game',\n\t\tLANGUAGE_SWITCHER: 'Language',\n\t\tCN: 'Chinese',\n\t\tEN: 'English',\n\t\tDIFFICULT: 'Difficulty',\n\t\tEASY: 'Easy',\n\t\tNORMAL: 'Normal',\n\t\tHARD: 'Hard',\n\t\tBACK: 'Back',\n\t\tSAVE_SLOT: 'Save Slot'\n\t}\n}","export default {\n\tgameSelectScene: {\n\t\tGAME_TITLE: '三国志',\n\t\tGAME_VERSION: '版本',\n\t\tNEW_GAME: '新游戏',\n\t\tLOAD_SAVED: '读取进度',\n\t\tLANGUAGE_SWITCHER: '切换语言',\n\t\tCN: '中文',\n\t\tEN: '英语',\n\t\tDIFFICULT: '难度',\n\t\tEASY: '简单',\n\t\tNORMAL: '一般',\n\t\tHARD: '困难',\n\t\tBACK: '后退',\n\t\tSAVE_SLOT: '存档'\n\t}\n}","import en from './en';\nimport cn from './cn';\n\nexport default {\n\tcurrentLanguage: 'cn',\n\tcontent: cn,\n\tset: function(lang){\n\t\tswitch (lang.toLowerCase()) {\n\t\t\tcase 'en':\n\t\t\t\tthis.currentLanguage = 'en';\n\t\t\t\tthis.content = en;\n\t\t\t\tbreak;\n\t\t\tcase 'cn':\n\t\t\t\tthis.currentLanguage = 'cn';\n\t\t\t\tthis.content = cn;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('unrecognized language code in Language Class');\n\t\t}\n\t},\n\tget: function(){\n\t\treturn this.currentLanguage;\n\t}\n};","import React, { Component } from 'react';\nimport gameConf from '../../conf/gameConf.js';\nimport lang from '../../i18n';\n\nimport './gameSelectBanner.scss';\n\nclass GameSelectBanner extends Component {\n  render() {\n\t\tlet text = lang.content.gameSelectScene;\n    return (\n      <div className='cp cp-game-select-banner'>\n         <h1 className='primary-text'>{ text.GAME_TITLE }</h1>\n         <span className='game-version'>{ text.GAME_VERSION } { gameConf.version }</span>\n      </div>\n    );\n  }\n}\n\nexport default GameSelectBanner;","import React, { Component } from 'react';\n// import gameConf from '../../conf/gameConf';\nimport event from '../../services/event';\n// import lang from '../../i18n';\n\nimport './commandBox.scss';\n\n// \n// ***************  Command Box  ***************\n// \n// @args:\n// \t{\n// \t\teventName: { String }\n// \t\theading: { String } - optional\n// \t\tcommands: { Object }\n// \t\t\t[\n// \t\t\t\t{\n// \t\t\t\t\tlabel: { String },\n// \t\t\t\t\tvalue: { String },\n// \t\t\t\t}\n// \t\t\t]\n// \t}\n// \n// *********************************************\n\nclass GameSelectBanner extends Component {\n\n\t// constructor(props){\n\t// \tsuper(props);\n\t// }\n\n\t_getLayout(){\n\t\tlet layout = [];\n\t\tthis.props.args.commands.forEach((command, idx) => {\n\t\t\tlayout.push(<li key={ idx } className='command'>\n\t\t\t\t<button data-value={ command.value } className={`command-btn ${command.value}`}\n\t\t\t\t\tonClick={ this._clickCommand.bind(this, command) }>\n\t\t\t\t\t{ command.label }\n\t\t\t\t</button>\n\t\t\t</li>)\n\t\t});\n\t\treturn layout;\n\t}\n\n\t_clickCommand(command){\n\t\tevent.trigger(`${this.props.args.eventName}.click`, command);\n\t\tevent.trigger(`${this.props.args.eventName}.${command.value}.click`, command);\n\t}\n\n  render() {\n\t\t// let text = lang.content.gameSelectScene;\n\t\tlet layout = this._getLayout();\n\t\tlet heading = this.props.args.heading ? \n\t\t\t<h3 className='heading'>{this.props.args.heading}</h3> : ''\n    return (\n      <div className={`cp cp-command-box ${this.props.args.eventName}`}>\n      \t{ heading }\n      \t<ul>\n         \t{ layout }\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default GameSelectBanner;","import React, { Component } from 'react';\nimport gameConf from '../../conf/gameConf';\n// import service from './service';\nimport './gameSelect.scss';\n\nimport event from '../../services/event';\nimport GameSelectBanner from '../../cps/gameSelectBanner';\nimport CommandBox from '../../cps/commandBox';\nimport lang from '../../i18n';\n\nclass GameSelect extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      commandBox: 'main'\n    }\n  }\n\n  _getCommandBox(){\n    let text = lang.content.gameSelectScene;\n    switch (this.state.commandBox) {\n      case 'main':\n        return {\n          eventName: 'gameSelect',\n          commands: [\n            {\n              label: text.NEW_GAME,\n              value: 'newGame'\n            },\n            {\n              label: text.LOAD_SAVED,\n              value: 'loadGame'\n            },\n            {\n              label: text.LANGUAGE_SWITCHER,\n              value: 'languageSwitcher'\n            },\n          ]\n        }\n      case 'newGame':\n        return {\n          eventName: 'newGame',\n          commands: [\n            {\n              label: text.EASY,\n              value: 'level1'\n            },\n            {\n              label: text.NORMAL,\n              value: 'level2'\n            },\n            {\n              label: text.HARD,\n              value: 'level3'\n            },\n            {\n              label: text.BACK,\n              value: 'back'\n            }\n          ]\n        }\n      case 'loadGame':\n        return {\n          eventName: 'loadGame',\n          commands: [\n            {\n              label: `${text.SAVE_SLOT} 1`,\n              value: 'save1'\n            },\n            {\n              label: `${text.SAVE_SLOT} 2`,\n              value: 'save2'\n            },\n            {\n              label: `${text.SAVE_SLOT} 3`,\n              value: 'save3'\n            },\n            {\n              label: `${text.SAVE_SLOT} 4`,\n              value: 'save4'\n            },\n            {\n              label: `${text.SAVE_SLOT} 5`,\n              value: 'save5'\n            },\n            {\n              label: `${text.SAVE_SLOT} 6`,\n              value: 'save6'\n            },\n            {\n              label: `${text.SAVE_SLOT} 7`,\n              value: 'save7'\n            },\n            {\n              label: `${text.SAVE_SLOT} 8`,\n              value: 'save8'\n            }\n          ]\n        }\n       case 'languageSwitcher':\n        return {\n          eventName: 'languageSwitcher',\n          commands: [\n            {\n              label: `${text.CN}`,\n              value: 'cn'\n            },\n            {\n              label: `${text.EN}`,\n              value: 'en'\n            }\n          ]\n        }\n      default:\n        return;\n    }\n  }\n\n  componentDidMount(){\n    \n    event.on('gameSelect.newGame.click', (cmd) => {\n      this.setState({\n        commandBox: 'newGame'\n      });\n    });\n\n    event.on('gameSelect.loadGame.click', (cmd) => {\n      this.setState({\n        commandBox: 'loadGame'\n      });\n    });\n\n    event.on('gameSelect.languageSwitcher.click', (cmd) => {\n      this.setState({\n        commandBox: 'languageSwitcher'\n      });\n    });\n\n    event.on('newGame.click', (cmd) => {\n\n      event.trigger('scene.change', gameConf.scene.ROLE_SELECT)\n\n      this.setState({\n        commandBox: 'main'\n      });\n    });\n\n    event.on('loadGame.click', (cmd) => {\n      this.setState({\n        commandBox: 'main'\n      });\n    });\n\n    event.on('languageSwitcher.click', (cmd) => {\n      if(cmd.value !== lang.get()){\n        lang.set(cmd.value);\n        event.trigger('lang.change', cmd.value)\n      }\n      this.setState({\n        commandBox: 'main'\n      });\n    });\n  }\n\n  render() {\n    let arg = this._getCommandBox();\n    return (\n      <div className='game-select scene'>\n        <GameSelectBanner />\n        <div className='game-select-box'>\n          <div className='command-box'>\n            <CommandBox args = { arg } />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default GameSelect;","import React, { Component } from 'react';\n// import gameConf from '../conf/gameConf';\n// import service from './service';\n\nimport './roleSelect.scss';\n\nclass RoleSelect extends Component {\n\n  // constructor(props){\n  //   super(props);\n  // }\n\n  _init(){\n    \n  }\n\n  render() {\n    return (\n      <div className=\"role-select scene\">\n\n      </div>\n    );\n  }\n}\n\nexport default RoleSelect;","import React, { Component } from 'react';\n// import gameConf from '../conf/gameConf';\n// import service from './service';\n\nclass MainMap extends Component {\n\n  // constructor(props){\n    // super(props);\n    // this.state = {\n    //   scene: 1\n    // }\n  // }\n\n  render() {\n    return (\n      <div className=\"main-map scene\">\n      \tMain Main\n      </div>\n    );\n  }\n}\n\nexport default MainMap;","import React, { Component } from 'react';\nimport gameConf from '../conf/gameConf';\nimport event from '../services/event';\nimport game from '../services/game';\n// import lang from '../i18n';\n\n// import service from './service';\n\nimport GameSelect from '../scenes/gameSelect';\nimport RoleSelect from '../scenes/roleSelect';\nimport MainMap from '../scenes/mainMap';\n\nclass Game extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      scene: 0,\n      lang: 'cn'\n    }\n  }\n\n  _getScene(scene){\n\n  \tlet layout = null;\n\n  \tswitch (this.state.scene) {\n  \t\tcase gameConf.scene.GAME_SELECT:\n  \t\t\tlayout = <GameSelect />\n  \t\t\tbreak;\n      case gameConf.scene.ROLE_SELECT:\n        layout = <RoleSelect />\n        break;\n  \t\tcase gameConf.scene.MAIN_MAP:\n  \t\t\tlayout = <MainMap />\n  \t\t\tbreak;\n  \t\tcase gameConf.scene.BATTLE_MAP:\n  \t\t\tlayout = <div id=\"battle-map-scene\">this is battle map</div>\n  \t\t\tbreak;\n  \t\tcase gameConf.scene.BATTLE:\n  \t\t\tlayout = <div id=\"battle-scene\">this is battle</div>\n  \t\t\tbreak;\n  \t\tcase gameConf.scene.END:\n  \t\t\tlayout = <div id=\"end-scene\">this is the end</div>\n  \t\t\tbreak;\n  \t\tdefault:\n  \t\t\tbreak;\n  \t}\n\n  \treturn layout;\n  }\n\n  _init(){\n    game.init();\n    // lang.set('cn');\n    // this._toScene(gameConf.scene.GAME_SELECT);\n    this._toScene(gameConf.scene.ROLE_SELECT);\n  }\n\n  _toScene(id){\n    this.setState({\n      scene: parseInt(id)\n    });\n  }\n\n  componentDidMount(){\n\n    this._init();\n\n    event.on('lang.change', (newLang) => {\n      this.setState({\n        lang: newLang\n      });\n    });\n\n    event.on('scene.change', (newScene) => {\n      this.setState({\n        scene: newScene\n      });\n    });\n  }\n\n  render() {\n    if(!this.state.scene){\n      return <div id='loading'>Loading...</div>\n    }\n  \tlet scene = this._getScene(this.state.scene);\n    return (\n      <div id=\"game-wrapper\" className={ this.state.lang }>\n      \t{ scene }\n      </div>\n    );\n  }\n}\n\nexport default Game;","import React from 'react';\nimport './App.scss';\nimport Game from './game';\n\nfunction App() {\n  return (\n    <div id=\"game\">\n      <Game />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n// serviceWorker.unregister();\n"],"sourceRoot":""}